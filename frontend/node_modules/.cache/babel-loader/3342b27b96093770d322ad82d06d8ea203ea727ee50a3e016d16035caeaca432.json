{"ast":null,"code":"import _objectSpread from\"C:/Users/sivas/My Project/QuickLAN/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Box,Typography,Paper,List,ListItem,ListItemText,Snackbar,Alert}from'@mui/material';import axios from'axios';import FileUploader from'../components/FileUploader';import TransferLogs from'../components/TransferLogs';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DashboardPage=_ref=>{let{receiverIp,receiverPort}=_ref;const[files,setFiles]=useState([]);const[progressMessages,setProgressMessages]=useState([]);const[uploading,setUploading]=useState(false);const[snackbar,setSnackbar]=useState({open:false,message:'',severity:'info'});useEffect(()=>{fetchFiles();},[]);const fetchFiles=async()=>{try{const response=await axios.get('http://localhost:9092/api/files');setFiles(response.data);}catch(error){console.error('Error fetching files:',error);showSnackbar('Failed to fetch files','error');}};const showSnackbar=function(message){let severity=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'info';setSnackbar({open:true,message,severity});};const handleCloseSnackbar=()=>{setSnackbar(_objectSpread(_objectSpread({},snackbar),{},{open:false}));};const handleFileUpload=async file=>{if(!receiverIp||!receiverPort){showSnackbar('Receiver IP and port must be set.','warning');return;}setUploading(true);try{const formData=new FormData();formData.append('file',file);// Upload file to backend\nawait axios.post('http://localhost:9092/api/files/upload',formData,{headers:{'Content-Type':'multipart/form-data'}});// Send file via TCP\nawait axios.post('http://localhost:9092/api/send',null,{params:{receiverIp,receiverPort,filePath:\"received_files/\".concat(file.name)}});showSnackbar('File sent successfully!','success');fetchFiles();}catch(error){console.error('Error sending file:',error);//showSnackbar('Failed to send file.', 'error');\n}finally{setUploading(false);}};return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,children:\"Dashboard\"}),/*#__PURE__*/_jsx(FileUploader,{onFileUpload:handleFileUpload,uploading:uploading}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{mt:4},children:\"Available Files\"}),/*#__PURE__*/_jsx(Paper,{sx:{maxHeight:200,overflowY:'auto'},children:/*#__PURE__*/_jsx(List,{children:files.map(file=>/*#__PURE__*/_jsx(ListItem,{divider:true,children:/*#__PURE__*/_jsx(ListItemText,{primary:file.name,secondary:\"\".concat(file.size,\" bytes\")})},file.name))})}),/*#__PURE__*/_jsx(TransferLogs,{logs:progressMessages}),/*#__PURE__*/_jsx(Snackbar,{open:snackbar.open,autoHideDuration:6000,onClose:handleCloseSnackbar,anchorOrigin:{vertical:'bottom',horizontal:'center'},children:/*#__PURE__*/_jsx(Alert,{onClose:handleCloseSnackbar,severity:snackbar.severity,sx:{width:'100%'},children:snackbar.message})})]});};export default DashboardPage;","map":{"version":3,"names":["React","useState","useEffect","Box","Typography","Paper","List","ListItem","ListItemText","Snackbar","Alert","axios","FileUploader","TransferLogs","jsx","_jsx","jsxs","_jsxs","DashboardPage","_ref","receiverIp","receiverPort","files","setFiles","progressMessages","setProgressMessages","uploading","setUploading","snackbar","setSnackbar","open","message","severity","fetchFiles","response","get","data","error","console","showSnackbar","arguments","length","undefined","handleCloseSnackbar","_objectSpread","handleFileUpload","file","formData","FormData","append","post","headers","params","filePath","concat","name","children","variant","gutterBottom","onFileUpload","sx","mt","maxHeight","overflowY","map","divider","primary","secondary","size","logs","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","width"],"sources":["C:/Users/sivas/My Project/QuickLAN/frontend/src/pages/DashboardPage.jsx"],"sourcesContent":["\r\nimport React, { useState, useEffect } from 'react';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Paper,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  Snackbar,\r\n  Alert,\r\n} from '@mui/material';\r\nimport axios from 'axios';\r\nimport FileUploader from '../components/FileUploader';\r\nimport TransferLogs from '../components/TransferLogs';\r\n\r\nconst DashboardPage = ({ receiverIp, receiverPort }) => {\r\n  const [files, setFiles] = useState([]);\r\n  const [progressMessages, setProgressMessages] = useState([]);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [snackbar, setSnackbar] = useState({ open: false, message: '', severity: 'info' });\r\n\r\n  useEffect(() => {\r\n    fetchFiles();\r\n  }, []);\r\n\r\n  const fetchFiles = async () => {\r\n    try {\r\n      const response = await axios.get('http://localhost:9092/api/files');\r\n      setFiles(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching files:', error);\r\n      showSnackbar('Failed to fetch files', 'error');\r\n    }\r\n  };\r\n\r\n  const showSnackbar = (message, severity = 'info') => {\r\n    setSnackbar({ open: true, message, severity });\r\n  };\r\n\r\n  const handleCloseSnackbar = () => {\r\n    setSnackbar({ ...snackbar, open: false });\r\n  };\r\n\r\n  const handleFileUpload = async (file) => {\r\n    if (!receiverIp || !receiverPort) {\r\n      showSnackbar('Receiver IP and port must be set.', 'warning');\r\n      return;\r\n    }\r\n\r\n    setUploading(true);\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('file', file);\r\n\r\n      // Upload file to backend\r\n      await axios.post('http://localhost:9092/api/files/upload', formData, {\r\n        headers: { 'Content-Type': 'multipart/form-data' },\r\n      });\r\n\r\n      // Send file via TCP\r\n      await axios.post('http://localhost:9092/api/send', null, {\r\n        params: {\r\n          receiverIp,\r\n          receiverPort,\r\n          filePath: `received_files/${file.name}`,\r\n        },\r\n      });\r\n\r\n      showSnackbar('File sent successfully!', 'success');\r\n      fetchFiles();\r\n    } catch (error ) {\r\n      console.error('Error sending file:', error);\r\n      //showSnackbar('Failed to send file.', 'error');\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Typography variant=\"h5\" gutterBottom>\r\n        Dashboard\r\n      </Typography>\r\n\r\n      <FileUploader onFileUpload={handleFileUpload} uploading={uploading} />\r\n\r\n      <Typography variant=\"h6\" sx={{ mt: 4 }}>\r\n        Available Files\r\n      </Typography>\r\n      <Paper sx={{ maxHeight: 200, overflowY: 'auto' }}>\r\n        <List>\r\n          {files.map((file) => (\r\n            <ListItem key={file.name} divider>\r\n              <ListItemText primary={file.name} secondary={`${file.size} bytes`} />\r\n            </ListItem>\r\n          ))}\r\n        </List>\r\n      </Paper>\r\n\r\n      <TransferLogs logs={progressMessages} />\r\n\r\n      <Snackbar\r\n        open={snackbar.open}\r\n        autoHideDuration={6000}\r\n        onClose={handleCloseSnackbar}\r\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n      >\r\n        <Alert onClose={handleCloseSnackbar} severity={snackbar.severity} sx={{ width: '100%' }}>\r\n          {snackbar.message}\r\n        </Alert>\r\n      </Snackbar>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default DashboardPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}